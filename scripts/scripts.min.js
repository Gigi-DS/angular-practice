var blogApp=angular.module("someBlogApp",["ngRoute","someBlogServices","angularUtils.directives.dirPagination"]);blogApp.controller("testCtrl",["$scope","$http",function(e,r){e.main={Name:"Gigi",Address:"Unknown"}}]),blogApp.config(["$routeProvider",function(e){e.when("/",{templateUrl:"app/views/home.html",controller:"homeCtrl"}).when("/articles",{templateUrl:"app/views/articles.html",controller:"articlesCtrl"}).when("/article/:articleId",{templateUrl:"app/views/article.html",controller:"articleCtrl"}).when("/register",{templateUrl:"app/views/register.html",controller:"registerCtrl"}).when("/addarticle",{templateUrl:"app/views/addarticle.html",controller:"addArticleCtrl"}).when("/persons",{templateUrl:"app/views/persons.html",controller:"personsCtrl"}).otherwise({redirectTo:"app/"})}]),blogApp.controller("addArticleCtrl",["$scope","$http","articles","LS","artID",function(e,r,t,i,l){e.article={id:"",img:"",title:"",short_desc:"",desc:""},e.addArticle=function(r){e.articles=i.getData(),console.log("old articles"+e.articles),e.id=l.setId(),(e.articles.id=e.id)&&(e.id=l.setId()),e.article.id=e.id,e.article.img="3.jpg",e.articles=e.articles.push(r),console.log("new articles"+e.articles),console.log(e.article),i.setData(e.articles)}}]),blogApp.controller("articleCtrl",["$scope","$http","$routeParams","articles",function(e,r,t,i){e.article=i.get({articleId:t.articleId})}]),blogApp.controller("articlesCtrl",["$scope","$window","$http","articles","LS",function(e,r,t,l,o){e.orderArticle="-id",e.articles=o.getData("articles-storage"),console.log(e.articles),e.removeArticle=function(r){for(i=e.articles.length-1;i>=0;i--)e.articles[i].id==r&&e.articles.splice(i,1),o.setData(e.articles)}}]),blogApp.controller("homeCtrl",["$scope","$http","articles",function(e,r,t){e.articles=t.query()}]),blogApp.controller("personsCtrl",["$scope","$routeParams","$window","customerData","$log","LS",function(e,r,t,i,l,o){e.persons=[],i.getAllData().then(function(r){e.persons=r}),e.searchParams=function(r){i.getData(r).then(function(r){e.persons=r})},e.showAllCustomers=function(){i.getAllData().then(function(r){e.persons=r,e.search="",e.customerFilter=""})},e.sort=function(r){e.sortKey=r,e.reverse=!e.reverse}}]),blogApp.controller("registerCtrl",["$scope","$http",function(e,r){e.user={}}]),blogApp.directive("someBlogArticles",function(){return{restrict:"A",templateUrl:"app/views/directivetmpl/articles.html"}}).directive("someBlogFullArticle",function(){return{restrict:"E",templateUrl:"app/views/directivetmpl/fullarticle.html"}}).directive("emailRequiredValid",function(){return{link:function(e,r,t){r.on("blur",function(){e.regform.email.$error.required&&alert("field is required"),e.regform.email.$invalid&&!e.regform.email.$error.required&&alert("invalid email")})}}}).directive("nameRequired",function(){return{link:function(e,r,t){r.on("blur",function(){e.regform.name.$error.required&&alert("field is required"),e.regform.$error.minlength&&alert("You must enter min. 3 characters")})}}}).directive("passRequired",function(){return{restrict:"A",link:function(e,r,t){r.on("blur",function(){e.regform.password.$error.required&&alert("this field is required"),e.regform.password.$error.minlength&&alert("You must enter min. 6 characters")})}}}).directive("pwCheck",[function(){return{require:"ngModel",link:function(e,r,t){var i="#"+t.pwCheck;r.on("blur",function(){r.val()!==$(i).val()&&alert("Passwords doesn`t match!")})}}}]);var articleServices=angular.module("someBlogServices",["ngResource"]);articleServices.factory("articles",["$resource",function(e){return e("jsondata/:articleId.json",{},{query:{method:"GET",params:{articleId:"articles"},isArray:!0}})}]),articleServices.factory("LS",["$window",function(e){function r(){if(!e.localStorage)throw new Error("local Storage is not set")}return r(),{setData:function(r,t){e.localStorage.setItem(t,JSON.stringify(r))},getData:function(r){return JSON.parse(e.localStorage.getItem(r))},clearData:function(r){e.localStorage.removeItem(r)}}}]),articleServices.factory("artID",["$window",function(e){return{setId:function(){return Math.floor(6e3*Math.random()+1)}}}]),articleServices.factory("customerData",["$http","LS","$q",function(e,r,t){function i(){return customers=r.getData("cutomers"),o=customers?t.resolve(customers):e.get(l).then(function(e){return r.setData(e.data,"cutomers"),e.data})}var l="jsondata/articles1.json",o=null;return i(),{getData:function(e){return o.then(function(r){function t(r){return"name"in r&&r.name.toLocaleLowerCase()===e.toLowerCase()?!0:(i++,!1)}var i=0;if(void 0!=e){var l=r.filter(t);return console.log("Filtered Array\n",l),l}})},getAllData:function(){return o.then(function(e){return e})}}}]);
//# sourceMappingURL=scripts.min.js.map